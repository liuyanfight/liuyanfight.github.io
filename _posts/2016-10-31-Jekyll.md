---
layout: post
title:  "Centos7安装Jekyll"
date:   2016-10-31
categories: Software
tags: Software Server
location: UTS Building 4
finished: true
---

> 想在服务器上安装Jekyll,同时发布到github.io上面。已经通过dropbox同步了liuyanfight.github.io文件，在服务器上写了脚本自动发布。如果服务器上安装好了Jekyll，就可以直接通过服务器来查看修改blog的配置与布局而不是频繁的push。

## 自动发布github.io项目

在配置好git和github的情况下  
在liuyanfight.github.io项目下，创建脚本`autopush.sh`  

```

#!/bin/bash

cd ~/Dropbox/liuyanfight.github.io
git add .
git commit -m "autopush from L-Centos"
git push

```

添加定时任务,每天三点自动执行。

`* 3 * * * /root/Dropbox/liuyanfight.github.io/autopush.sh
`

## 配置jekyll

安装rvm https://devops.profitbricks.com/tutorials/install-ruby-214-with-rvm-on-centos/

`sudo yum -y install patch libyaml-devel libffi-devel glibc-headers autoconf gcc-c++ glibc-devel readline-devel zlib-devel openssl-devel bzip2 automake libtool bison`

`gpg2 --keyserver hkp://keys.gnupg.net --recv-keys D39DC0E3`

`curl -L get.rvm.io | bash -s stable`

安装rvm成功

```
Installing RVM to /usr/local/rvm/
Installation of RVM in /usr/local/rvm/ is almost complete:

* First you need to add all users that will be using rvm to 'rvm' group,
and logout - login again, anyone using rvm will be operating with `umask u=rwx,g=rwx,o=rx`.

* To start using RVM you need to run `source /etc/profile.d/rvm.sh`
in all your open shell windows, in rare cases you need to reopen all shell windows.

# L-centos,
#
#   Thank you for using RVM!
#   We sincerely hope that RVM helps to make your life easier and more enjoyable!!!
#
# ~Wayne, Michal & team.

In case of problems: https://rvm.io/help and https://twitter.com/rvm_io

```

rvm一直显示安装未成功。执行以下命令  

```
# 设置一下环境变量，下面要用到
PATH=$PATH:/usr/local/rvm/bin:/usr/local/rvm/rubies/ruby-2.3.0/bin
```

## 给用户L,加入sudoer  

sudo的作用就是使当前非root用户在使用没有权限的命令 时，直接在命令前加入sudo，在输入自己当前用户的密码就可以完成root用户的功能，而不必在每次使用su -来回切换用户了。sudo的配置文件位于/etc/sudoers，需要root权限才可以读写。

```
vim /etc/sudoers

找到root ALL=(ALL) ALL这一行，在后面再加上一行就可以了（不用引号）：
L ALL=(ALL) ALL
其中username为指定的使用sudo的用户，引号内的空格为tab
如果你想每次使用sudo命令的时候都提示你输入根密码，移动到这一行：
#%wheel ALL=(ALL) ALL
解除#号注释
如果你不想每次使用sudo命令的时候都提示你输入跟密码，移动到下面这一行：
#%wheel ALL=(ALL)NOPASSWD:ALL
解除#号注释
保存后退出

添加用户名到wheel用户组：
usermod -G wheel username
```
user: L
pwd:pwd.

发现自己一开始就一直使用root权限，导致文件都只有root用户才可以编辑。尴尬。

一直安装jekyll失败。
